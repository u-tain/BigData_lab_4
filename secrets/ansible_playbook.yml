- name: ansible
  hosts: localhost
  become: yes

  vars:
    my_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          38343637333031306231343035366332343362663631633534633638653665393832653633323234
          3264613062393630663564343463393162643538343966320a623931633264356437363236333231
          35623830666138616537623563633239366365656433376136633666646262393336646439333132
          3438646239303335380a663536363839366661373466613536663562373833336262666439373531
          3866

    my_user: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          37363039653231636164626432623063376638363064393630626634643333626362656531373531
          6232656538386532613236623232383533336532323866390a613530643034363461643532376561
          34366639636637663637396430653061636165666634623865366663643233393063636262316461
          3261393631623761370a633066336333646330656536646566353237363161383764633438346531
          6336

    my_host:  !vault |
          $ANSIBLE_VAULT;1.1;AES256
          63323230383866333030646232633363356564643334363735333834663038623831396631363762
          3230633662303265633138303165326538636265656264650a376530386438343466336639333135
          63343937393430636334653064306635343630616637643761623132323137316538656436373433
          3630636137623231330a373131393031323063383338333564623463663730643961636661646564
          3162
    
    kafka_host:  !vault |
          $ANSIBLE_VAULT;1.1;AES256
          33363263363839346433616262366462336135636561353237363661343137613534303264313337
          6663393131636564373565313032333434306537363966350a306266653638343931663437313138
          66323333613030333931653931373136643062303033336137386364313539313064336465653866
          3066353866363139630a323430386634633439623739353937383530353334303535613162383964
          3839
          
    kafka_port: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          64616530313533323134363332346265333534663236396139376330646633386539393131636636
          3036346238343565363436326538303363316533626235320a616536303637396631363931346335
          37633830666236313935386233353132383439393631336334333139623130346333393562393162
          6437393164316336650a633335363831366438656261303432666431613135376564356135336539
          3838


  tasks:
    - name: create file with secrets
      copy:
        dest: "/app/secrets/secrets.yml"
        content: |
          pass: {{ my_password }}
          user: {{ my_user }}
          my_host: {{ my_host }}
          kafka_host: {{ kafka_host }}
          kafka_port: {{ kafka_port }}

